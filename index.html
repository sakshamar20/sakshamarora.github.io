<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saksham Arora | Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-color: #020617;
            --card-bg: rgba(255, 255, 255, 0.03);
            --card-border: rgba(255, 255, 255, 0.15);
            --card-border-highlight: rgba(255, 255, 255, 0.4);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --bloomberg-orange: #ff9f0a;
            --bloomberg-bg: #000000;
            --bloomberg-panel: #1e1e1e;
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            position: relative;
            overflow-x: hidden;
        }

        /* --- Liquid Background Effects --- */
        .liquid-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }
        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.6;
            animation: float 20s infinite ease-in-out alternate;
        }
        .blob-1 { width: 600px; height: 600px; background: #4f46e5; top: -10%; left: -10%; }
        .blob-2 { width: 500px; height: 500px; background: #06b6d4; bottom: -10%; right: -10%; animation-delay: -5s; }
        .blob-3 { width: 300px; height: 300px; background: #d946ef; top: 40%; left: 40%; animation-duration: 15s; filter: blur(60px); }

        @keyframes float {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(50px, 50px) scale(1); }
        }

        /* --- Bento Grid System --- */
        .bento-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-auto-rows: 180px;
            gap: 1.5rem;
            max-width: 1200px;
            width: 100%;
            margin: 40px auto;
            z-index: 10;
            perspective: 1000px;
            transition: all 0.5s ease;
        }

        /* --- Liquid Glass Card --- */
        .bento-card {
            background: var(--card-bg);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border-radius: 28px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            border: 1px solid var(--card-border);
            border-top: 1px solid var(--card-border-highlight);
            border-left: 1px solid var(--card-border-highlight);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            transform-style: preserve-3d;
            will-change: transform, grid-column, grid-row, order;
            transition: background 0.3s, border-color 0.3s, box-shadow 0.3s;
        }

        .bento-card:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* --- Expanded / Theatre Mode State --- */
        .bento-card.expanded {
            grid-column: 1 / -1 !important;
            grid-row: span 4 !important;
            order: -1;
            z-index: 50;
            cursor: default;
            background: rgba(15, 23, 42, 0.95);
            overflow-y: auto;
            min-height: 600px;
            transform: none !important; 
            padding: 0 !important;
        }

        /* Fade animation */
        .content-fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Close Button */
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            transition: all 0.2s;
        }
        .close-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        /* --- Profile Photo Blending Effect --- */
        .profile-photo {
            filter: grayscale(100%) contrast(1.2) brightness(1.1);
            transition: all 0.5s ease;
            object-fit: cover;
            border-radius: 20px; 
            border: 2px solid rgba(255,255,255,0.1);
        }
        
        .bento-card:hover .profile-photo {
            filter: grayscale(0%) contrast(1) brightness(1);
            border-color: rgba(255,255,255,0.5);
            transform: scale(1.05);
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }

        /* Helpers */
        .col-span-2 { grid-column: span 2; }
        .row-span-2 { grid-row: span 2; }
        .bento-card.expanded.col-span-2 { grid-column: 1 / -1; }
        .bento-card.expanded.row-span-2 { grid-row: span 4; }

        .project-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 16px;
        }

        .bento-card::-webkit-scrollbar { width: 8px; }
        .bento-card::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        .bento-card::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }
        .bento-card::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.4); }

        h1, h2, h3, h4, p, span, button, input, textarea {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            letter-spacing: -0.02em;
        }

        /* Timeline Styles */
        .timeline-item.active {
            background: rgba(255,255,255,0.1);
            border-left: 4px solid #60a5fa;
        }
        
        /* Game Styles */
        .game-btn {
            transition: all 0.1s;
            active: transform: scale(0.95);
        }
        .game-btn:active {
            transform: scale(0.95);
        }
        
        /* Bloomberg Terminal Styles */
        .bb-font { font-family: 'Courier New', Courier, monospace; letter-spacing: -0.5px; }
        .bb-panel { background-color: var(--bloomberg-panel); border: 1px solid #333; }
        .bb-text { color: var(--bloomberg-orange); }
        .bb-btn {
            background: #333;
            color: var(--bloomberg-orange);
            border: 1px solid var(--bloomberg-orange);
            transition: all 0.1s;
            text-transform: uppercase;
            font-weight: bold;
        }
        .bb-btn:hover { background: var(--bloomberg-orange); color: black; }
        .bb-btn:active { transform: translateY(2px); }
        
        @media (max-width: 1024px) {
            .bento-grid { grid-template-columns: repeat(2, 1fr); }
            .bento-card.expanded { grid-column: span 2 !important; }
        }
        @media (max-width: 640px) {
            .bento-grid { grid-template-columns: 1fr; }
            .col-span-2, .row-span-2 { grid-column: span 1; grid-row: auto; }
            .bento-card.expanded { grid-column: span 1 !important; }
        }
    </style>
</head>
<body>

    <div class="liquid-bg">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="bento-grid" id="grid-container">
        
        <!-- 1. Profile -->
        <div class="bento-card col-span-2 row-span-2 justify-between" data-id="profile">
            <div class="card-content flex flex-col h-full justify-between relative z-10 pointer-events-none">
                <div>
                    <div class="flex justify-between items-start">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=200&auto=format&fit=crop" alt="Saksham Arora" class="w-24 h-24 profile-photo mb-4">
                        
                        <div class="px-3 py-1 rounded-full border border-yellow-500/30 bg-yellow-500/10 text-yellow-400 text-xs font-bold flex items-center gap-2 h-fit">
                            <span class="w-2 h-2 rounded-full bg-yellow-400 animate-pulse"></span>
                            FLIPKART
                        </div>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-bold mb-2 text-white">Saksham <span class="text-gray-400">Arora</span></h1>
                    <p class="text-blue-200/80 text-lg leading-relaxed max-w-sm mt-4">
                        Business Analyst & ML Engineer. Driving growth through data & AI.
                    </p>
                </div>
                <div class="flex gap-3 mt-6">
                    <div class="p-3 rounded-full bg-white/5 border border-white/10 text-white"><i data-lucide="linkedin"></i></div>
                    <div class="p-3 rounded-full bg-white/5 border border-white/10 text-white"><i data-lucide="mail"></i></div>
                    <div class="p-3 rounded-full bg-white/5 border border-white/10 text-white"><i data-lucide="file-text"></i></div>
                </div>
            </div>
        </div>

        <!-- 2. Map -->
        <div class="bento-card justify-center items-center relative group text-center" data-id="map">
            <div class="card-content absolute inset-0 w-full h-full">
                <div class="absolute inset-0 bg-[url('https://upload.wikimedia.org/wikipedia/commons/e/e4/Bangalore_skyline_at_night.jpg')] opacity-30 bg-cover bg-center"></div>
                <div class="relative z-10 backdrop-blur-sm bg-black/20 p-4 rounded-2xl border border-white/10 h-full flex flex-col justify-center items-center pointer-events-none">
                    <i data-lucide="map-pin" class="w-8 h-8 text-rose-400 mx-auto mb-2"></i>
                    <h3 class="text-lg font-bold text-white">Bangalore</h3>
                    <p class="text-xs text-gray-400">India</p>
                </div>
            </div>
        </div>

        <!-- 3. MARKET MAKER -->
        <div class="bento-card !bg-emerald-900/20 !border-emerald-500/30 justify-center items-center text-center" data-id="market">
            <div class="card-content w-full flex flex-col items-center justify-center pointer-events-none">
                <div class="w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mb-3 shadow-[0_0_20px_rgba(16,185,129,0.4)] animate-pulse">
                    <i data-lucide="trending-up" class="w-6 h-6 text-black fill-black"></i>
                </div>
                <div class="w-full">
                    <p class="text-xs font-bold text-emerald-100 mb-1">MINI GAME</p>
                    <h3 class="text-white font-bold text-sm">Market Maker</h3>
                </div>
            </div>
        </div>

        <!-- 4. Experience -->
        <div class="bento-card flex-col justify-center" data-id="experience">
            <div class="card-content flex flex-col items-center justify-center h-full pointer-events-none">
                <div class="text-5xl font-bold text-white mb-1">1+</div>
                <p class="text-sm font-bold text-purple-300 uppercase tracking-wider">Years Exp.</p>
                <div class="mt-4 flex flex-wrap gap-2 justify-center">
                    <span class="text-[10px] px-2 py-1 bg-white/10 rounded text-gray-300">Analysis</span>
                    <span class="text-[10px] px-2 py-1 bg-white/10 rounded text-gray-300">ML/AI</span>
                </div>
            </div>
        </div>

        <!-- 5. Project Vertical (Timeline Entry Point) -->
        <div class="bento-card row-span-2 !p-0 relative group" data-id="project1">
            <div class="card-content w-full h-full">
                <img src="https://images.unsplash.com/photo-1677442136019-21780ecad995?q=80&w=800&auto=format&fit=crop" class="project-img" alt="AI Research">
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent p-6 flex flex-col justify-end pointer-events-none">
                    <p class="text-cyan-400 text-xs font-bold uppercase mb-1">Projects</p>
                    <h3 class="text-xl font-bold text-white">R&D Lab</h3>
                    <p class="text-xs text-gray-400 mt-1 opacity-80 group-hover:opacity-100 transition-opacity">GenAI, Debris Flow, Computer Vision</p>
                </div>
            </div>
        </div>

        <!-- 6. Tech Stack -->
        <div class="bento-card col-span-2" data-id="stack">
            <div class="card-content h-full flex flex-col justify-center pointer-events-none">
                <div class="flex items-center gap-3 mb-4">
                    <div class="p-2 bg-blue-500/20 rounded-lg border border-blue-500/30">
                        <i data-lucide="cpu" class="w-5 h-5 text-blue-400"></i>
                    </div>
                    <h3 class="font-bold text-white">Tech Stack</h3>
                </div>
                <div class="grid grid-cols-4 gap-3 h-full content-center">
                    <div class="flex flex-col items-center justify-center p-2 bg-white/5 rounded-xl border border-white/10">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" class="w-8 h-8 mb-1" alt="Python">
                        <span class="text-[10px] text-gray-400">Python</span>
                    </div>
                    <div class="flex flex-col items-center justify-center p-2 bg-white/5 rounded-xl border border-white/10">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tensorflow/tensorflow-original.svg" class="w-8 h-8 mb-1" alt="TensorFlow">
                        <span class="text-[10px] text-gray-400">TensorFlow</span>
                    </div>
                    <div class="flex flex-col items-center justify-center p-2 bg-white/5 rounded-xl border border-white/10">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg" class="w-8 h-8 mb-1" alt="SQL">
                        <span class="text-[10px] text-gray-400">SQL</span>
                    </div>
                    <div class="flex flex-col items-center justify-center p-2 bg-white/5 rounded-xl border border-white/10">
                        <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cplusplus/cplusplus-original.svg" class="w-8 h-8 mb-1" alt="C++">
                        <span class="text-[10px] text-gray-400">C++</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 7. Services -->
        <div class="bento-card" data-id="services">
            <div class="card-content h-full flex flex-col justify-center pointer-events-none">
                <h3 class="font-bold text-white mb-4 text-sm uppercase tracking-wider text-center">Expertise</h3>
                <ul class="space-y-3 text-sm text-gray-300">
                    <li class="flex items-center gap-2"><i data-lucide="bar-chart" class="w-4 h-4 text-cyan-400"></i> Data Analysis</li>
                    <li class="flex items-center gap-2"><i data-lucide="brain" class="w-4 h-4 text-purple-400"></i> ML Models</li>
                    <li class="flex items-center gap-2"><i data-lucide="trending-up" class="w-4 h-4 text-pink-400"></i> Growth Strategy</li>
                </ul>
            </div>
        </div>

        <!-- 8. Project Wide (Debris Flow - UPDATED IMAGE) -->
        <div class="bento-card col-span-2 !p-0 relative group overflow-hidden" data-id="project2">
            <div class="card-content w-full h-full">
                <!-- Reliable Unsplash Image for Mountains -->
                <img src="https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1600&q=80" class="project-img w-full h-full object-cover opacity-80">
                <div class="absolute inset-0 bg-black/50 p-6 flex flex-col justify-end items-start pointer-events-none">
                    <span class="bg-white text-black text-[10px] font-bold px-2 py-1 rounded mb-2">MITACS CANADA</span>
                    <h3 class="text-2xl font-bold text-white">Debris Flow Modelling</h3>
                    <p class="text-gray-300 text-sm mt-1">Predicting post-wildfire hazards using ML.</p>
                </div>
            </div>
        </div>

        <!-- 9. Contact -->
        <div class="bento-card col-span-2 flex-row items-center justify-between gap-4 !bg-gradient-to-r !from-indigo-500/10 !to-purple-500/10" data-id="contact">
            <div class="card-content w-full flex flex-row items-center justify-between gap-4 pointer-events-none">
                <div class="flex-1">
                    <h3 class="text-xl font-bold text-white">Get in touch.</h3>
                    <p class="text-xs text-gray-400 mt-1">sakshamar20@gmail.com</p>
                </div>
                <button class="px-6 py-3 rounded-xl bg-white text-black font-bold text-sm flex items-center gap-2">
                    Contact Me <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            let gameInterval = null;
            let animationFrameId = null;

            // --- Project Data Store ---
            const projectsDB = {
                genai: {
                    title: "GenAI4Edu",
                    subtitle: "Undergraduate Research Project",
                    date: "Dec '23 - Present",
                    image: "https://images.unsplash.com/photo-1677442136019-21780ecad995?q=80&w=1600&auto=format&fit=crop",
                    tech: ["Mistral LLM", "Knowledge Graphs", "RAG", "Streamlit", "Python"],
                    description: "Developing a personalized study aid utilizing Large Language Models (LLMs) specifically tailored to NCERT textbooks. The system uses Knowledge Graphs to ground LLM responses, significantly reducing hallucinations and improving context awareness for students.",
                    metrics: [
                        { label: "Accuracy", value: "High Context" },
                        { label: "Tech", value: "RAG Pipeline" }
                    ]
                },
                borders: {
                    title: "Beyond Borders",
                    subtitle: "Data Analysis of PG Mobility",
                    date: "Aug '23 - Nov '23",
                    image: "https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1600&auto=format&fit=crop",
                    tech: ["R Studio", "Rvest", "RSelenium", "Shiny", "ggplot2"],
                    description: "Analyzed postgraduate masters applications to reveal foreign university admission trends. Implemented precise data scraping techniques to collect application data and visualized preferences, admission chances, and academic trends using interactive dashboards.",
                    metrics: [
                        { label: "Tools", value: "R & Shiny" },
                        { label: "Outcome", value: "Trend Insights" }
                    ]
                },
                air: {
                    title: "Debris Flow Modelling",
                    subtitle: "Mitacs GRI - UBC Canada",
                    date: "May '23 - Jul '23",
                    image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1600&q=80", // Reliable Unsplash Image
                    tech: ["XGBoost", "React", "Flask", "DGPS", "Python"],
                    description: "Developed a machine learning pipeline to predict post-wildfire debris flow volumes using watershed morphometrics. Deployed the model via a Flask/React web app and enhanced software for correcting faulty Rinex DGPS files.",
                    metrics: [
                        { label: "Focus", value: "Wildfire Safety" },
                        { label: "Deployment", value: "Web App" }
                    ]
                },
                audio: {
                    title: "Audio Classification",
                    subtitle: "SURGE Research Intern",
                    date: "May '22 - Jun '23",
                    image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=1600&auto=format&fit=crop",
                    tech: ["CNN", "TensorFlow", "Python", "Spectrograms"],
                    description: "Leveraged Spectrogram properties for Automatic Speech Recognition (ASR). Employed diverse data pre-processing techniques to enhance feature extraction and trained Convolutional Neural Networks.",
                    metrics: [
                        { label: "CNN Accuracy", value: "87.8%" },
                        { label: "Uplift vs DNN", value: "+12.9%" }
                    ]
                },
                pose: {
                    title: "3D Pose Warping",
                    subtitle: "Electronics Club Project",
                    date: "Jun '21 - Jul '21",
                    image: "https://images.unsplash.com/photo-1535385793343-27dff1413c5a?q=80&w=1600&auto=format&fit=crop",
                    tech: ["GANs", "ResNet-50", "Computer Vision", "Python"],
                    description: "Developed a deep learning model to manipulate human poses in images, aligning them with preferred poses from reference images. Implemented a GAN model on the Fashion 3D dataset.",
                    metrics: [
                        { label: "SSIM (BG)", value: "0.9346" },
                        { label: "SSIM (FG)", value: "0.3464" }
                    ]
                }
            };

            // --- Main Content Data ---
            const contentData = {
                profile: `
                    <div class="max-w-4xl mx-auto pt-12 px-4 content-fade-in">
                        <div class="flex flex-col md:flex-row gap-12 items-center md:items-start">
                            <div class="text-center md:text-left shrink-0">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=400&auto=format&fit=crop" class="w-48 h-48 rounded-3xl border-4 border-white/10 shadow-2xl mb-6 profile-photo">
                                <h2 class="text-4xl font-bold text-white mb-2">Saksham Arora</h2>
                                <p class="text-blue-400 text-lg font-medium">Business Analyst & ML Engineer</p>
                                <div class="flex gap-4 justify-center md:justify-start mt-6">
                                    <a href="#" class="p-3 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition"><i data-lucide="linkedin"></i></a>
                                    <a href="mailto:sakshamar20@gmail.com" class="p-3 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition"><i data-lucide="mail"></i></a>
                                </div>
                            </div>
                            <div class="space-y-8 text-lg text-gray-300 leading-relaxed">
                                <p>I am a graduate of <strong>IIT Kanpur</strong> (Chemical Engineering & Computer Science) currently working as a <strong>Business Analyst at Flipkart</strong>. My expertise lies at the intersection of Data Science, Machine Learning, and Product Growth strategy.</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="bg-white/5 p-6 rounded-2xl border border-white/10">
                                        <h3 class="font-bold text-white text-xl mb-2">Current Role</h3>
                                        <p class="font-medium text-white">Business Analyst</p>
                                        <p class="text-sm text-gray-400">Flipkart • Jul '24 - Present</p>
                                    </div>
                                    <div class="bg-white/5 p-6 rounded-2xl border border-white/10">
                                        <h3 class="font-bold text-white text-xl mb-2">Education</h3>
                                        <p class="font-medium text-white">B.Tech, IIT Kanpur</p>
                                        <p class="text-sm text-gray-400">CPI: 8.7/10.0</p>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white mb-4">Core Competencies</h3>
                                    <p>Proficient in leveraging Python, SQL, and ML frameworks (TensorFlow, Scikit-learn) to drive business decisions. I have also passed the <strong>CFA Level 1</strong> exam, giving me a strong foundation in financial analysis.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                map: `
                    <div class="w-full h-full flex flex-col content-fade-in p-8">
                        <h2 class="text-4xl font-bold text-white mb-8 text-center">Bangalore, India</h2>
                        <div class="flex-1 w-full bg-gray-800 rounded-2xl overflow-hidden relative border border-white/10">
                            <iframe width="100%" height="100%" frameborder="0" style="border:0; filter: invert(90%) hue-rotate(180deg) grayscale(20%) contrast(1.2);" src="https://maps.google.com/maps?q=Flipkart%20Internet%20Private%20Limited,%20Embassy%20Tech%20Village,%20Bengaluru&t=&z=13&ie=UTF8&iwloc=&output=embed" allowfullscreen></iframe>
                            <div class="absolute bottom-8 left-8 bg-black/80 backdrop-blur-md p-6 rounded-xl border border-white/10 pointer-events-none">
                                <p class="text-gray-400 text-xs uppercase tracking-wider font-bold mb-1">Workplace</p>
                                <p class="text-2xl font-mono text-white">Flipkart HQ</p>
                            </div>
                        </div>
                    </div>
                `,
                market: `
                    <div class="w-full h-full flex flex-col content-fade-in bg-black p-4 bb-font">
                        <div class="flex justify-between items-end mb-2 border-b border-gray-800 pb-2">
                            <div>
                                <h2 class="text-xl text-white font-bold flex items-center gap-2"><span class="bb-text">>></span> MARKET SIM <span class="text-xs bg-gray-800 px-2 py-0.5 rounded text-gray-400">LIVE</span></h2>
                                <p class="text-gray-500 text-xs">INTRADAY TERMINAL</p>
                            </div>
                            <div class="text-right">
                                <p class="text-xs text-gray-400">TOTAL EQUITY</p>
                                <p class="text-3xl text-white font-bold" id="game-portfolio">₹1,00,000.00</p>
                            </div>
                        </div>
                        <div class="flex-1 bb-panel relative mb-4 overflow-hidden min-h-0">
                            <canvas id="market-canvas" class="w-full h-full"></canvas>
                            <div class="absolute top-4 left-4 bg-black/80 border border-gray-700 p-2 rounded pointer-events-none">
                                <p class="text-xs text-gray-500" id="ticker-symbol">NIFTY 50</p>
                                <p class="text-2xl text-white font-bold" id="game-price">100.00</p>
                                <p class="text-xs" id="game-change">0.00 (0.00%)</p>
                            </div>
                            <div id="game-overlay" class="absolute inset-0 flex flex-col items-center justify-center bg-black/80 z-20">
                                <h3 class="text-4xl bb-text font-bold mb-2" id="game-msg">MARKET CLOSED</h3>
                                <p class="text-gray-400 mb-6">Session Time: 30 Seconds</p>
                                <button class="bb-btn px-8 py-3 text-lg" onclick="window.startGame()">OPEN MARKET</button>
                            </div>
                        </div>
                        <div class="flex flex-col md:flex-row gap-4 h-auto shrink-0">
                            <div class="flex-1 bb-panel p-3 flex justify-between items-center gap-4 overflow-x-auto">
                                <div><p class="text-[10px] text-gray-500 uppercase">Cash (INR)</p><p class="text-lg text-white font-bold" id="game-cash">₹1,00,000</p></div>
                                <div><p class="text-[10px] text-gray-500 uppercase">Pos (Shares)</p><p class="text-lg text-white font-bold" id="game-shares">0</p></div>
                                <div><p class="text-[10px] text-gray-500 uppercase">Session P&L</p><p class="text-lg font-bold" id="game-pnl">₹0.00</p></div>
                                <div class="min-w-[80px]"><p class="text-[10px] text-gray-500 text-right mb-1">TIME</p><div class="w-full bg-gray-800 h-1.5 rounded-full overflow-hidden"><div class="bg-orange-500 h-full w-full" id="time-bar"></div></div><p class="text-right text-xs text-white mt-1" id="game-timer">30s</p></div>
                            </div>
                            <div class="flex gap-2 w-full md:w-auto">
                                <button class="flex-1 md:w-24 bg-green-900/30 border border-green-600/50 hover:bg-green-600 hover:text-white text-green-500 font-bold py-2 rounded transition flex flex-col items-center justify-center" onclick="window.trade('buy')"><span class="text-sm" id="btn-buy-text">BUY</span><span class="text-[9px] opacity-70 font-normal">LONG/COVER</span></button>
                                <button class="flex-1 md:w-24 bg-red-900/30 border border-red-600/50 hover:bg-red-600 hover:text-white text-red-500 font-bold py-2 rounded transition flex flex-col items-center justify-center" onclick="window.trade('sell')"><span class="text-sm" id="btn-sell-text">SELL</span><span class="text-[9px] opacity-70 font-normal">CLOSE/SHORT</span></button>
                                <button class="w-16 bb-btn text-[10px] leading-tight" onclick="window.trade('liquidate')">FLAT</button>
                            </div>
                        </div>
                    </div>
                `,
                experience: `
                     <div class="max-w-3xl mx-auto pt-12 px-4 content-fade-in">
                        <h2 class="text-4xl font-bold text-white mb-12 text-center">Professional Journey</h2>
                        <div class="relative border-l-2 border-white/10 ml-3 space-y-16 pb-12">
                            <div class="relative pl-12">
                                <div class="absolute -left-[11px] top-1 w-6 h-6 rounded-full bg-yellow-500 border-4 border-[#0f172a] shadow-[0_0_15px_rgba(234,179,8,0.5)]"></div>
                                <span class="text-yellow-400 text-sm font-bold uppercase tracking-wider bg-yellow-500/10 px-2 py-1 rounded">Jul '24 - Present</span>
                                <h3 class="text-2xl font-bold text-white mt-4">Business Analyst</h3>
                                <p class="text-gray-400 text-lg mb-4">Flipkart Internet Pvt Ltd</p>
                                <div class="bg-white/5 p-6 rounded-xl border border-white/10 text-gray-300 text-lg leading-relaxed space-y-4">
                                    <p>• Collaborated with Product & Tech to refine homepage via A/B testing and personalization.</p>
                                    <p>• Led forecasting of 2025 traffic/engagement trends using Prophet time-series models.</p>
                                    <p>• Optimized homepage feed CTR by 140 bps and PPV by 2.3% by reducing redundancy.</p>
                                </div>
                            </div>
                            <div class="relative pl-12">
                                <div class="absolute -left-[11px] top-1 w-6 h-6 rounded-full bg-red-500 border-4 border-[#0f172a]"></div>
                                <span class="text-red-400 text-sm font-bold uppercase tracking-wider bg-red-500/10 px-2 py-1 rounded">May '23 - Jul '23</span>
                                <h3 class="text-2xl font-bold text-white mt-4">Mitacs Research Intern</h3>
                                <p class="text-gray-400 text-lg mb-4">University of British Columbia, Canada</p>
                                <div class="bg-white/5 p-6 rounded-xl border border-white/10 text-gray-300 text-lg leading-relaxed">
                                    <p>Built ML pipelines to predict debris flow post-wildfire using watershed data. Deployed a Flask/React web app and optimized DGPS/Rinex processing.</p>
                                </div>
                            </div>
                            <div class="relative pl-12">
                                <div class="absolute -left-[11px] top-1 w-6 h-6 rounded-full bg-blue-500 border-4 border-[#0f172a]"></div>
                                <span class="text-blue-400 text-sm font-bold uppercase tracking-wider bg-blue-500/10 px-2 py-1 rounded">May '22 - Jul '22</span>
                                <h3 class="text-2xl font-bold text-white mt-4">SURGE Research Intern</h3>
                                <p class="text-gray-400 text-lg mb-4">IIT Kanpur</p>
                                <div class="bg-white/5 p-6 rounded-xl border border-white/10 text-gray-300 text-lg leading-relaxed">
                                    <p>Selected amongst top 250 applicants for summer research. Worked on Audio Classification using CNNs, achieving 87.8% accuracy.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                project1: `
                    <div class="flex flex-col md:flex-row h-full w-full content-fade-in overflow-hidden">
                        <div class="w-full md:w-1/3 md:border-r border-white/10 p-6 overflow-y-auto bg-black/20">
                            <h3 class="text-gray-400 text-xs font-bold uppercase tracking-wider mb-6">Project Timeline</h3>
                            <div class="space-y-1">
                                <div class="timeline-item active cursor-pointer p-4 rounded-xl hover:bg-white/5 transition border-l-4 border-transparent" onclick="window.switchProject('genai', this)"><span class="text-xs text-gray-500 block mb-1">Dec '23</span><h4 class="text-white font-bold text-sm">GenAI4Edu</h4></div>
                                <div class="timeline-item cursor-pointer p-4 rounded-xl hover:bg-white/5 transition border-l-4 border-transparent" onclick="window.switchProject('borders', this)"><span class="text-xs text-gray-500 block mb-1">Aug '23</span><h4 class="text-white font-bold text-sm">Beyond Borders</h4></div>
                                <div class="timeline-item cursor-pointer p-4 rounded-xl hover:bg-white/5 transition border-l-4 border-transparent" onclick="window.switchProject('air', this)"><span class="text-xs text-gray-500 block mb-1">May '23</span><h4 class="text-white font-bold text-sm">Debris Flow Modelling</h4></div>
                                <div class="timeline-item cursor-pointer p-4 rounded-xl hover:bg-white/5 transition border-l-4 border-transparent" onclick="window.switchProject('audio', this)"><span class="text-xs text-gray-500 block mb-1">May '22</span><h4 class="text-white font-bold text-sm">Audio Classification</h4></div>
                                 <div class="timeline-item cursor-pointer p-4 rounded-xl hover:bg-white/5 transition border-l-4 border-transparent" onclick="window.switchProject('pose', this)"><span class="text-xs text-gray-500 block mb-1">Jun '21</span><h4 class="text-white font-bold text-sm">3D Pose Warping</h4></div>
                            </div>
                        </div>
                        <div class="w-full md:w-2/3 p-8 md:p-12 overflow-y-auto" id="project-detail-view">
                            <div class="content-fade-in">
                                <div class="h-64 w-full rounded-2xl overflow-hidden mb-8 relative">
                                    <img src="https://images.unsplash.com/photo-1677442136019-21780ecad995?q=80&w=1600&auto=format&fit=crop" class="w-full h-full object-cover" id="detail-img">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/90 to-transparent"></div>
                                    <div class="absolute bottom-6 left-6">
                                        <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded mb-2 inline-block" id="detail-date">Dec '23 - Present</span>
                                        <h2 class="text-3xl font-bold text-white" id="detail-title">GenAI4Edu</h2>
                                        <p class="text-gray-300" id="detail-subtitle">Undergraduate Research Project</p>
                                    </div>
                                </div>
                                <h3 class="text-xl font-bold text-white mb-4">Overview</h3>
                                <p class="text-gray-300 text-lg leading-relaxed mb-8" id="detail-desc">Developing a personalized study aid utilizing Large Language Models (LLMs) specifically tailored to NCERT textbooks. The system uses Knowledge Graphs to ground LLM responses, significantly reducing hallucinations and improving context awareness for students.</p>
                                <div class="grid grid-cols-2 gap-4 mb-8" id="detail-metrics">
                                    <div class="bg-white/5 p-4 rounded-xl border border-white/10"><p class="text-gray-400 text-xs uppercase">Accuracy</p><p class="text-xl font-bold text-white">High Context</p></div>
                                    <div class="bg-white/5 p-4 rounded-xl border border-white/10"><p class="text-gray-400 text-xs uppercase">Tech</p><p class="text-xl font-bold text-white">RAG Pipeline</p></div>
                                </div>
                                <h3 class="text-xl font-bold text-white mb-4">Technologies</h3>
                                <div class="flex flex-wrap gap-2" id="detail-tech">
                                    <span class="px-3 py-1 bg-white/10 rounded-full text-sm text-white border border-white/10">Mistral LLM</span>
                                    <span class="px-3 py-1 bg-white/10 rounded-full text-sm text-white border border-white/10">Knowledge Graphs</span>
                                    <span class="px-3 py-1 bg-white/10 rounded-full text-sm text-white border border-white/10">RAG</span>
                                    <span class="px-3 py-1 bg-white/10 rounded-full text-sm text-white border border-white/10">Streamlit</span>
                                    <span class="px-3 py-1 bg-white/10 rounded-full text-sm text-white border border-white/10">Python</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                stack: `
                     <div class="max-w-5xl mx-auto pt-12 px-4 content-fade-in">
                        <h2 class="text-4xl font-bold text-white mb-12 text-center">Skills & Expertise</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="bg-white/5 p-8 rounded-3xl border border-white/10">
                                <h3 class="text-blue-400 font-bold uppercase tracking-wider text-sm mb-8 flex items-center gap-3"><i data-lucide="code" class="w-5 h-5"></i> Languages & Frameworks</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-blue-400 shadow-[0_0_10px_#60a5fa]"></div><span class="text-lg text-white font-medium">Python</span></div>
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-blue-600 shadow-[0_0_10px_#2563eb]"></div><span class="text-lg text-white font-medium">C++</span></div>
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-white shadow-[0_0_10px_white]"></div><span class="text-lg text-white font-medium">SQL / MySQL</span></div>
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-orange-500 shadow-[0_0_10px_orange]"></div><span class="text-lg text-white font-medium">TensorFlow</span></div>
                                </div>
                            </div>
                             <div class="bg-white/5 p-8 rounded-3xl border border-white/10">
                                <h3 class="text-green-400 font-bold uppercase tracking-wider text-sm mb-8 flex items-center gap-3"><i data-lucide="bar-chart-2" class="w-5 h-5"></i> Tools & Analytics</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-green-500 shadow-[0_0_10px_#22c55e]"></div><span class="text-lg text-white font-medium">Pandas/NumPy</span></div>
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-purple-500 shadow-[0_0_10px_#a855f7]"></div><span class="text-lg text-white font-medium">Tableau/Looker</span></div>
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-yellow-500 shadow-[0_0_10px_#eab308]"></div><span class="text-lg text-white font-medium">Git</span></div>
                                    <div class="p-4 bg-black/40 rounded-xl border border-white/5 flex items-center gap-4"><div class="w-3 h-3 rounded-full bg-red-500 shadow-[0_0_10px_red]"></div><span class="text-lg text-white font-medium">Excel</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                `,
                project2: `
                    <div class="w-full h-full flex flex-col content-fade-in">
                        <div class="h-[40vh] w-full relative">
                            <img src="https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1600&q=80" class="w-full h-full object-cover opacity-80">
                            <div class="absolute inset-0 bg-black/50 p-6 flex flex-col justify-end items-start pointer-events-none">
                                <span class="bg-white text-black text-[10px] font-bold px-2 py-1 rounded mb-2">MITACS CANADA</span>
                                <h3 class="text-2xl font-bold text-white">Debris Flow Modelling</h3>
                                <p class="text-gray-300 text-sm mt-1">Predicting post-wildfire hazards using ML.</p>
                            </div>
                        </div>
                        <div class="px-8 md:px-16 py-12 max-w-4xl mx-auto w-full text-lg text-gray-300 leading-relaxed">
                            <p class="mb-8 text-xl text-white">Developed a robust Machine Learning pipeline to predict the volume of debris flow and sediment-laden floods triggered by wildfires. The model utilizes watershed morphometrics and climatic variables to estimate prediction uncertainty and generate automated hydrographs.</p>
                            
                            <h3 class="text-2xl font-bold text-white mb-6">Key Features</h3>
                            <div class="space-y-4 mb-12">
                                <div class="flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/10">
                                    <i data-lucide="code" class="w-8 h-8 text-green-400"></i>
                                    <div>
                                        <h4 class="text-white font-bold">ML Pipeline</h4>
                                        <p class="text-sm text-gray-400">SVM, RF, XGBoost Algorithms</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/10">
                                    <i data-lucide="globe" class="w-8 h-8 text-blue-400"></i>
                                    <div>
                                        <h4 class="text-white font-bold">Web Deployment</h4>
                                        <p class="text-sm text-gray-400">Flask & React Application</p>
                                    </div>
                                </div>
                                 <div class="flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/10">
                                    <i data-lucide="settings" class="w-8 h-8 text-yellow-400"></i>
                                    <div>
                                        <h4 class="text-white font-bold">Optimization</h4>
                                        <p class="text-sm text-gray-400">Rinex/DGPS File Correction</p>
                                    </div>
                                </div>
                            </div>
                            
                            <h3 class="text-2xl font-bold text-white mb-4">Tech Stack</h3>
                            <div class="flex gap-2 flex-wrap">
                                <span class="px-3 py-1 bg-white/10 rounded text-sm">XGBoost</span>
                                <span class="px-3 py-1 bg-white/10 rounded text-sm">React</span>
                                <span class="px-3 py-1 bg-white/10 rounded text-sm">Flask</span>
                                <span class="px-3 py-1 bg-white/10 rounded text-sm">DGPS</span>
                                 <span class="px-3 py-1 bg-white/10 rounded text-sm">Python</span>
                            </div>
                        </div>
                    </div>
                `,
                services: `
                    <div class="max-w-4xl mx-auto pt-12 px-4 content-fade-in">
                        <h2 class="text-4xl font-bold text-white mb-4 text-center">Expertise & Services</h2>
                        <p class="text-center text-gray-400 mb-12 text-lg">Turning data into actionable insights.</p>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-white/5 p-8 rounded-3xl border border-white/10 hover:bg-white/10 transition group"><div class="w-14 h-14 bg-cyan-500/20 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition"><i data-lucide="bar-chart-2" class="w-7 h-7 text-cyan-400"></i></div><h3 class="text-2xl font-bold text-white mb-4">Data Analysis</h3><p class="text-gray-400 mb-6">ETL workflows, KPI tracking, and automated dashboarding using SQL and Tableau/Looker.</p></div>
                            <div class="bg-white/5 p-8 rounded-3xl border border-white/10 hover:bg-white/10 transition group"><div class="w-14 h-14 bg-purple-500/20 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition"><i data-lucide="brain" class="w-7 h-7 text-purple-400"></i></div><h3 class="text-2xl font-bold text-white mb-4">Machine Learning</h3><p class="text-gray-400 mb-6">Building predictive models (Regression, Forecasting, Classification) to solve business problems.</p></div>
                            <div class="bg-white/5 p-8 rounded-3xl border border-white/10 hover:bg-white/10 transition group"><div class="w-14 h-14 bg-pink-500/20 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition"><i data-lucide="trending-up" class="w-7 h-7 text-pink-400"></i></div><h3 class="text-2xl font-bold text-white mb-4">Growth Strategy</h3><p class="text-gray-400 mb-6">A/B testing, hypothesis testing, and market trend analysis to drive product growth.</p></div>
                        </div>
                    </div>
                `,
                contact: `
                     <div class="max-w-2xl mx-auto pt-12 px-4 content-fade-in">
                        <div class="text-center mb-12">
                            <h2 class="text-4xl font-bold text-white mb-4">Let's Connect</h2>
                            <p class="text-xl text-gray-400">Open to collaborations and interesting opportunities.</p>
                        </div>

                        <div class="space-y-6">
                            <div class="bg-white/5 p-6 rounded-xl border border-white/10 flex items-center gap-4">
                                <div class="bg-white/10 p-3 rounded-full"><i data-lucide="mail" class="text-white"></i></div>
                                <div>
                                    <p class="text-sm text-gray-400">Email</p>
                                    <a href="mailto:sakshamar20@gmail.com" class="text-xl text-white font-bold hover:text-blue-400 transition">sakshamar20@gmail.com</a>
                                </div>
                            </div>
                             <div class="bg-white/5 p-6 rounded-xl border border-white/10 flex items-center gap-4">
                                <div class="bg-white/10 p-3 rounded-full"><i data-lucide="map-pin" class="text-white"></i></div>
                                <div>
                                    <p class="text-sm text-gray-400">Location</p>
                                    <p class="text-xl text-white font-bold">Bangalore, India</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            };

            // --- Logic ---
            const cards = document.querySelectorAll('.bento-card');
            const gridContainer = document.getElementById('grid-container');
            let activeCard = null;
            let originalContentMap = new Map();

            cards.forEach(card => {
                originalContentMap.set(card.getAttribute('data-id'), card.innerHTML);

                card.addEventListener('click', (e) => {
                    if(e.target.closest('.close-btn')) return;
                    if(e.target.closest('.timeline-item')) return;
                    if(e.target.closest('.game-btn')) return;

                    const id = card.getAttribute('data-id');

                    if (activeCard === card) return;
                    if (activeCard) closeCard(activeCard);

                    openCard(card, id);
                });
            });

            function openCard(card, id) {
                activeCard = card;
                card.classList.add('expanded');
                const content = contentData[id];
                const closeBtn = `<div class="close-btn" onclick="event.stopPropagation(); closeCard(this.parentElement)"><i data-lucide="x"></i></div>`;
                card.innerHTML = closeBtn + content;
                lucide.createIcons();
                setTimeout(() => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 300);
            }

            window.closeCard = function(cardOrBtn) {
                if (window.stopGame) window.stopGame();
                
                const card = cardOrBtn.classList.contains('bento-card') ? cardOrBtn : cardOrBtn.closest('.bento-card');
                const id = card.getAttribute('data-id');
                card.innerHTML = originalContentMap.get(id);
                card.classList.remove('expanded');
                activeCard = null;
                lucide.createIcons();
            }

            window.switchProject = function(key, element) {
                const items = document.querySelectorAll('.timeline-item');
                items.forEach(el => {
                    el.classList.remove('active');
                    el.classList.remove('bg-white/10');
                });
                element.classList.add('active');
                
                const data = projectsDB[key];
                
                const detailView = document.getElementById('project-detail-view');
                
                const techTags = data.tech.map(t => `<span class="px-3 py-1 bg-white/10 rounded-full text-sm text-white border border-white/10">${t}</span>`).join('');
                
                const metricsHtml = data.metrics.map(m => `
                    <div class="bg-white/5 p-4 rounded-xl border border-white/10">
                        <p class="text-gray-400 text-xs uppercase">${m.label}</p>
                        <p class="text-xl font-bold text-white">${m.value}</p>
                    </div>
                `).join('');

                // Logic to handle missing images or force removal for 'air' (Debris Flow)
                let headerVisual = '';
                if (data.image) {
                    headerVisual = `<img src="${data.image}" class="w-full h-full object-cover">`;
                } else {
                     headerVisual = `<div class="w-full h-full bg-gradient-to-br from-orange-900/40 to-slate-900"></div>`;
                }

                const newContent = `
                    <div class="content-fade-in">
                        <div class="h-64 w-full rounded-2xl overflow-hidden mb-8 relative">
                            ${headerVisual}
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 to-transparent"></div>
                            <div class="absolute bottom-6 left-6">
                                <span class="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded mb-2 inline-block">${data.date}</span>
                                <h2 class="text-3xl font-bold text-white">${data.title}</h2>
                                <p class="text-gray-300">${data.subtitle}</p>
                            </div>
                        </div>

                        <h3 class="text-xl font-bold text-white mb-4">Overview</h3>
                        <p class="text-gray-300 text-lg leading-relaxed mb-8">
                            ${data.description}
                        </p>

                        <div class="grid grid-cols-2 gap-4 mb-8">
                            ${metricsHtml}
                        </div>

                        <h3 class="text-xl font-bold text-white mb-4">Technologies</h3>
                        <div class="flex flex-wrap gap-2">
                            ${techTags}
                        </div>
                    </div>
                `;

                detailView.innerHTML = newContent;
            }

            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    if(card.classList.contains('expanded')) return;
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = ((y - centerY) / centerY) * -5; 
                    const rotateY = ((x - centerX) / centerX) * 5;
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.01, 1.01, 1.01)`;
                });

                card.addEventListener('mouseleave', () => {
                    if(card.classList.contains('expanded')) return;
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                });
            });

            const stockScenarios = {
                'RELIANCE.NS': { name: 'RELIANCE IND', startPrice: 2400.00, generateNext: (current, step) => current + (Math.random() - 0.48) * 3.5 },
                'TCS.NS': { name: 'TCS', startPrice: 3500.00, generateNext: (current, step) => current + (Math.random() - 0.5) * 2.0 },
                'HDFCBANK.NS': { name: 'HDFC BANK', startPrice: 1500.00, generateNext: (current, step) => current + (Math.random() - 0.5) * 2.5 + (1500 - current) * 0.005 },
                'TATAMOTORS.NS': { name: 'TATA MOTORS', startPrice: 950.00, generateNext: (current, step) => current + (Math.random() - 0.45) * 1.8 },
                'ADANIENT.NS': { name: 'ADANI ENT', startPrice: 3100.00, generateNext: (current, step) => current + (Math.random() - 0.5) * 8.0 }
            };

            let gameState = { running: false, price: 100, history: [], fullPath: [], pathIndex: 0, cash: 10000, shares: 0, timeLeft: 30, startPrice: 100, initialEquity: 10000, symbol: 'NIFTY 50' };

            window.startGame = function() {
                const canvas = document.getElementById('market-canvas');
                if(!canvas) return;
                const keys = Object.keys(stockScenarios);
                const randomKey = keys[Math.floor(Math.random() * keys.length)];
                const scenario = stockScenarios[randomKey];
                const path = [scenario.startPrice];
                let currentPrice = scenario.startPrice;
                for(let i=1; i<=600; i++) { currentPrice = scenario.generateNext(currentPrice, i); if(currentPrice < 1) currentPrice = 1; path.push(currentPrice); }
                gameState = { running: true, price: scenario.startPrice, startPrice: scenario.startPrice, history: [scenario.startPrice], fullPath: path, pathIndex: 0, cash: 100000, shares: 0, timeLeft: 30, initialEquity: 100000, symbol: scenario.name };
                const symbolEl = document.getElementById('ticker-symbol');
                if(symbolEl) symbolEl.innerText = gameState.symbol;
                document.getElementById('game-overlay').style.display = 'none';
                updateUI();
                if (gameInterval) clearInterval(gameInterval);
                gameInterval = setInterval(gameLoop, 50);
                if (animationFrameId) cancelAnimationFrame(animationFrameId);
                renderGame();
            }

            window.stopGame = function() {
                gameState.running = false;
                if (gameInterval) clearInterval(gameInterval);
                if (animationFrameId) cancelAnimationFrame(animationFrameId);
            }

            function gameLoop() {
                if (!gameState.running) return;
                gameState.timeLeft -= 0.05;
                if (gameState.timeLeft <= 0 || gameState.pathIndex >= gameState.fullPath.length - 1) { endGame(); return; }
                gameState.pathIndex++;
                gameState.price = gameState.fullPath[gameState.pathIndex];
                gameState.history.push(gameState.price);
                if (gameState.history.length > 300) gameState.history.shift();
                updateUI();
            }

            window.trade = function(type) {
                if (!gameState.running) return;
                const equity = gameState.cash + (gameState.shares * gameState.price);
                if (equity <= 0) return;
                if (type === 'buy') {
                    if (gameState.shares < 0) { const sharesToCover = Math.max(1, Math.floor(Math.abs(gameState.shares) * 0.25)); gameState.cash -= sharesToCover * gameState.price; gameState.shares += sharesToCover; }
                    else { const investAmount = gameState.cash * 0.25; if (investAmount > gameState.price) { const sharesToBuy = Math.floor(investAmount / gameState.price); gameState.cash -= sharesToBuy * gameState.price; gameState.shares += sharesToBuy; } }
                } else if (type === 'sell') {
                    if (gameState.shares > 0) { const sharesToSell = Math.max(1, Math.floor(gameState.shares * 0.25)); gameState.cash += sharesToSell * gameState.price; gameState.shares -= sharesToSell; }
                    else { const shortPower = equity * 0.25; if (shortPower > gameState.price) { const sharesToShort = Math.floor(shortPower / gameState.price); gameState.cash += sharesToShort * gameState.price; gameState.shares -= sharesToShort; } }
                } else if (type === 'liquidate') {
                    if (gameState.shares !== 0) { gameState.cash += gameState.shares * gameState.price; gameState.shares = 0; }
                }
                updateUI();
            }

            function updateUI() {
                const equity = gameState.cash + (gameState.shares * gameState.price);
                const pnl = equity - gameState.initialEquity;
                const change = gameState.price - gameState.startPrice;
                const changePct = (change / gameState.startPrice) * 100;
                document.getElementById('game-portfolio').innerText = '₹' + equity.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('game-cash').innerText = '₹' + Math.floor(gameState.cash).toLocaleString('en-IN');
                const sharesEl = document.getElementById('game-shares');
                sharesEl.innerText = gameState.shares;
                if (gameState.shares > 0) { sharesEl.style.color = '#4ade80'; document.getElementById('btn-buy-text').innerText = "BUY"; document.getElementById('btn-sell-text').innerText = "SELL"; }
                else if (gameState.shares < 0) { sharesEl.style.color = '#f87171'; document.getElementById('btn-buy-text').innerText = "COVER"; document.getElementById('btn-sell-text').innerText = "SHORT"; }
                else { sharesEl.style.color = 'white'; document.getElementById('btn-buy-text').innerText = "BUY"; document.getElementById('btn-sell-text').innerText = "SHORT"; }
                document.getElementById('game-price').innerText = gameState.price.toFixed(2);
                const pnlEl = document.getElementById('game-pnl'); pnlEl.innerText = (pnl >= 0 ? '+' : '') + '₹' + pnl.toFixed(2); pnlEl.style.color = pnl >= 0 ? '#4ade80' : '#f87171';
                const changeEl = document.getElementById('game-change'); changeEl.innerText = `${change.toFixed(2)} (${changePct.toFixed(2)}%)`; changeEl.style.color = change >= 0 ? '#4ade80' : '#f87171'; document.getElementById('game-price').style.color = change >= 0 ? '#4ade80' : '#f87171';
                document.getElementById('game-timer').innerText = Math.ceil(gameState.timeLeft) + 's';
                document.getElementById('time-bar').style.width = (gameState.timeLeft / 30 * 100) + '%';
            }

            function renderGame() {
                if (!gameState.running) return;
                const canvas = document.getElementById('market-canvas');
                if (!canvas) return; 
                const rect = canvas.getBoundingClientRect(); canvas.width = rect.width; canvas.height = rect.height;
                const ctx = canvas.getContext('2d'); const w = canvas.width; const h = canvas.height;
                ctx.fillStyle = '#000'; ctx.fillRect(0, 0, w, h);
                ctx.strokeStyle = '#1a1a1a'; ctx.lineWidth = 1;
                for(let i=0; i<w; i+=w/8) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,h); ctx.stroke(); }
                for(let i=0; i<h; i+=h/4) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(w,i); ctx.stroke(); }
                const min = Math.min(...gameState.history) * 0.999; const max = Math.max(...gameState.history) * 1.001; const range = max - min || 1; 
                const isUp = gameState.price >= gameState.startPrice; const color = isUp ? '#4ade80' : '#f87171'; 
                const gradient = ctx.createLinearGradient(0, 0, 0, h); gradient.addColorStop(0, isUp ? 'rgba(74, 222, 128, 0.1)' : 'rgba(248, 113, 113, 0.1)'); gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                ctx.beginPath();
                const history = gameState.history;
                history.forEach((p, i) => { const x = (i / (history.length - 1)) * w; const y = h - ((p - min) / range) * h; if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); });
                ctx.strokeStyle = color; ctx.lineWidth = 1.5; ctx.lineJoin = 'round'; ctx.stroke();
                ctx.lineTo(w, h); ctx.lineTo(0, h); ctx.closePath(); ctx.fillStyle = gradient; ctx.fill();
                const lastY = h - ((gameState.price - min) / range) * h;
                ctx.beginPath(); ctx.arc(w, lastY, 3, 0, Math.PI * 2); ctx.fillStyle = color; ctx.fill();
                ctx.beginPath(); ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)'; ctx.lineWidth = 1; ctx.setLineDash([4, 4]); ctx.moveTo(0, lastY); ctx.lineTo(w, lastY); ctx.stroke(); ctx.setLineDash([]);
                animationFrameId = requestAnimationFrame(renderGame);
            }

            function endGame() {
                gameState.running = false; clearInterval(gameInterval);
                const finalValue = gameState.cash + (gameState.shares * gameState.price);
                const profit = finalValue - 100000; const roi = (profit / 100000) * 100;
                const overlay = document.getElementById('game-overlay'); const msg = document.getElementById('game-msg');
                overlay.style.display = 'flex'; const colorClass = profit >= 0 ? 'text-green-500' : 'text-red-500';
                msg.innerHTML = `SESSION CLOSED<br><span class="${colorClass} text-2xl">ROI: ${roi.toFixed(2)}%</span><br><span class="text-sm text-gray-400">${gameState.symbol}</span>`;
                overlay.querySelector('button').innerText = "NEXT STOCK";
            }
        });
    </script>
</body>
</html>
